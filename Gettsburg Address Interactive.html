<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gettysburg Address Word Selector</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .address-text span {
            cursor: pointer;
            transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out;
            padding: 2px 1px;
            border-radius: 4px;
            white-space: pre-wrap; /* Allows words to wrap naturally */
        }
        .address-text span.selected {
            background-color: #3b82f6; /* Tailwind blue-500 */
            color: white;
        }
        .address-text span:hover {
            background-color: #dbeafe; /* Tailwind blue-100 */
        }
        .address-text span.selected:hover {
            background-color: #2563eb; /* Tailwind blue-600 */
        }
    </style>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
</head>
<body class="bg-gray-100 text-gray-800">

    <div class="container mx-auto p-4 md:p-8 max-w-4xl">
        <header class="text-center mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-900">Gettysburg Address Word Analysis</h1>
            <p class="text-md md:text-lg text-gray-600 mt-2">Click on words in the text to select or deselect them. The list below will update with the position of each word you choose.</p>
        </header>

        <main>
            <div id="address-container" class="bg-white p-6 md:p-8 rounded-lg shadow-md mb-8">
                <p id="address-text-display" class="address-text text-lg leading-relaxed"></p>
            </div>

            <div id="results-container" class="bg-white p-6 rounded-lg shadow-md">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-2xl font-bold text-gray-900">Selected Words (by position)</h2>
                    <button id="clear-button" class="bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-lg transition-colors duration-200">Clear Selections</button>
                </div>
                <div id="selected-words-list" class="bg-gray-50 p-4 rounded-md min-h-[100px] text-gray-700">
                    <p id="placeholder-text">No words selected yet. Click on a word above to begin.</p>
                </div>
                 <div class="mt-4 text-center">
                    <p class="font-bold">Total Words Selected: <span id="word-count">0</span></p>
                </div>
            </div>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const gettysburgAddress = "Four score and seven years ago our fathers brought forth on this continent, a new nation, conceived in Liberty, and dedicated to the proposition that all men are created equal. Now we are engaged in a great civil war, testing whether that nation, or any nation so conceived and so dedicated, can long endure. We are met on a great battle-field of that war. We have come to dedicate a portion of that field, as a final resting place for those who here gave their lives that that nation might live. It is altogether fitting and proper that we should do this. But, in a larger sense, we can not dedicate—we can not consecrate—we can not hallow—this ground. The brave men, living and dead, who struggled here, have consecrated it, far above our poor power to add or detract. The world will little note, nor long remember what we say here, but it can never forget what they did here. It is for us the living, rather, to be dedicated here to the unfinished work which they who fought here have thus far so nobly advanced. It is rather for us to be here dedicated to the great task remaining before us—that from these honored dead we take increased devotion to that cause for which they gave the last full measure of devotion—that we here highly resolve that these dead shall not have died in vain—that this nation, under God, shall have a new birth of freedom—and that government of the people, by the people, for the people, shall not perish from the earth.";

            const addressDisplay = document.getElementById('address-text-display');
            const selectedWordsList = document.getElementById('selected-words-list');
            const placeholderText = document.getElementById('placeholder-text');
            const clearButton = document.getElementById('clear-button');
            const wordCountSpan = document.getElementById('word-count');

            // Using a Set for efficient addition and removal of selected indices
            let selectedIndices = new Set();
            
            // Tokenize the address into words (sequences of letters, numbers, apostrophes, hyphens)
            // and non-words (everything else, like spaces and punctuation). This preserves the original text structure.
            const tokens = gettysburgAddress.match(/[\w’'-]+|[^\w’'-]+/g) || [];
            let wordCounter = 0;

            tokens.forEach(token => {
                // Test if the token is a word. The regex ensures tokens are either all word-like chars or all non-word-like chars.
                if (/[\w]/.test(token)) {
                    wordCounter++;
                    const wordSpan = document.createElement('span');
                    wordSpan.textContent = token;
                    wordSpan.dataset.index = wordCounter; // Use our own counter for a correct 1-based index
                    addressDisplay.appendChild(wordSpan);
                } else {
                    // It's punctuation and/or spaces, so add it as a plain, unclickable text node.
                    addressDisplay.appendChild(document.createTextNode(token));
                }
            });

            // Event listener for clicks on the address text
            addressDisplay.addEventListener('click', (event) => {
                const target = event.target;
                if (target.tagName === 'SPAN') {
                    const index = parseInt(target.dataset.index, 10);
                    target.classList.toggle('selected');

                    if (selectedIndices.has(index)) {
                        selectedIndices.delete(index);
                    } else {
                        selectedIndices.add(index);
                    }
                    updateSelectedList();
                }
            });

            // Function to update the displayed list of selected word indices
            function updateSelectedList() {
                if (selectedIndices.size === 0) {
                    placeholderText.style.display = 'block';
                    selectedWordsList.innerHTML = ''; // Clear previous numbers
                    selectedWordsList.appendChild(placeholderText);
                } else {
                    placeholderText.style.display = 'none';
                    // Sort the indices numerically before displaying
                    const sortedIndices = Array.from(selectedIndices).sort((a, b) => a - b);
                    selectedWordsList.textContent = sortedIndices.join(', ');
                }
                wordCountSpan.textContent = selectedIndices.size;
            }

            // Event listener for the clear button
            clearButton.addEventListener('click', () => {
                selectedIndices.clear();
                document.querySelectorAll('.address-text span.selected').forEach(span => {
                    span.classList.remove('selected');
                });
                updateSelectedList();
            });

            // Initial call to set the placeholder
            updateSelectedList();
        });
    </script>
</body>
</html>

